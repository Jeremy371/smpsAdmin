<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.humane.smps.mapper.ModelMapper">
    <select id="toolbar" resultType="com.humane.smps.dto.StatusDto">
        SELECT DISTINCT admission.admission_nm
                , exam.type_nm
                , exam.exam_date
                , exam.exam_time
                , examinee.dept_nm
                , examinee.major_nm
                , exam_map.group_nm
                , hall.head_nm
                , hall.bldg_nm
                , hall.hall_nm
                FROM exam_map
                INNER JOIN exam ON exam.exam_cd = exam_map.exam_cd
                INNER JOIN admission ON admission.admission_cd = exam.admission_cd
                INNER JOIN hall ON hall.hall_cd = exam_map.hall_cd
                INNER JOIN examinee ON examinee.examinee_cd = exam_map.examinee_cd
        <where>
            <if test="param.admissionNm != null">AND admission.admission_nm = #{param.admissionNm}</if>
            <if test="param.examDate != null">AND exam.exam_date = #{param.examDate}</if>
            <if test="param.examTime != null">AND exam.exam_time = #{param.examTime}</if>
            <if test="param.headNm != null">AND hall.headNm = #{param.headNm}</if>
            <if test="param.bldgNm != null">AND hall.bldgNm = #{param.bldgNm}</if>
            <if test="param.hallNm != null">AND hall.hallNm = #{param.hallNm}</if>
            <if test="param.userAdmissions != null">
                AND exam.admission_cd IN (${param.userAdmissions})
            </if>
        </where>
    </select>
</mapper>